<p>tarjeta-form works!</p>

<div class="tarjeta-form-page">
  <h1 *ngIf="!esEdicion">Nueva Tarjeta</h1>
  <h1 *ngIf="esEdicion">Editar Tarjeta</h1>

  <div *ngIf="cargando" class="info">Cargando datos...</div>
  <div *ngIf="error" class="error">{{ error }}</div>

  <form [formGroup]="form" (ngSubmit)="onSubmit()" *ngIf="!cargando">
    <div class="form-grid">
      <div class="form-group">
        <label>ID Cuenta</label>
        <input formControlName="cuenta_id" type="text" />
        <div class="errores" *ngIf="form.get('cuenta_id')?.touched">
          <small *ngIf="tieneError('cuenta_id', 'required')">
            La cuenta es obligatoria.
          </small>
        </div>
      </div>

      <div class="form-group">
        <label>Número de tarjeta</label>
        <input formControlName="numero_tarjeta" type="text" />
        <div class="errores" *ngIf="form.get('numero_tarjeta')?.touched">
          <small *ngIf="tieneError('numero_tarjeta', 'required')">
            El número de tarjeta es obligatorio.
          </small>
        </div>
      </div>

      <div class="form-group">
        <label>Tipo de tarjeta</label>
        <select formControlName="tipo_tarjeta">
          <option value="" disabled>Seleccionar...</option>
          <option *ngFor="let t of tiposTarjeta" [value]="t">
            {{ t | titlecase }}
          </option>
        </select>
      </div>

      <div class="form-group">
        <label>Fecha de emisión</label>
        <input formControlName="fecha_emision" type="date" />
        <div class="errores" *ngIf="form.get('fecha_emision')?.touched">
          <small *ngIf="tieneError('fecha_emision', 'required')">
            La fecha de emisión es obligatoria.
          </small>
        </div>
      </div>

      <div class="form-group">
        <label>Fecha de vencimiento</label>
        <input formControlName="fecha_vencimiento" type="date" />
        <div class="errores" *ngIf="form.get('fecha_vencimiento')?.touched">
          <small *ngIf="tieneError('fecha_vencimiento', 'required')">
            La fecha de vencimiento es obligatoria.
          </small>
        </div>
      </div>

      <div class="form-group">
        <label>Código de seguridad</label>
        <input formControlName="codigo_seguridad" type="text" />
      </div>

      <div class="form-group">
        <label>Límite de crédito</label>
        <input formControlName="limite_credito" type="number" step="0.01" />
        <div class="errores" *ngIf="form.get('limite_credito')?.touched">
          <small *ngIf="tieneError('limite_credito', 'min')">
            No puede ser negativo.
          </small>
        </div>
      </div>

      <div class="form-group">
        <label>Límite diario retiro</label>
        <input
          formControlName="limite_diario_retiro"
          type="number"
          step="0.01"
        />
        <div
          class="errores"
          *ngIf="form.get('limite_diario_retiro')?.touched"
        >
          <small *ngIf="tieneError('limite_diario_retiro', 'min')">
            No puede ser negativo.
          </small>
        </div>
      </div>

      <div class="form-group">
        <label>Estado</label>
        <select formControlName="estado">
          <option *ngFor="let e of estados" [value]="e">
            {{ e }}
          </option>
        </select>
      </div>
    </div>

    <div class="acciones">
      <button type="button" class="btn-cancelar" (click)="cancelar()">
        Cancelar
      </button>

      <button type="submit" class="btn-guardar" [disabled]="guardando">
        {{ guardando ? 'Guardando...' : 'Guardar' }}
      </button>
    </div>
  </form>
</div>
