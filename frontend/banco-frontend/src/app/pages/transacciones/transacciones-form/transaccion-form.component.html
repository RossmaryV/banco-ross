<div class="transaccion-form-page">
  <h1>Nueva Transacci贸n</h1>

  <div *ngIf="error" class="error">{{ error }}</div>

  <form [formGroup]="form" (ngSubmit)="onSubmit()">
    <div class="form-grid">
      <div class="form-group">
        <label>Tipo de transacci贸n</label>
        <select formControlName="tipo_transaccion">
          <option value="" disabled>Seleccionar...</option>
          <option *ngFor="let t of tipos" [value]="t">
            {{ t }}
          </option>
        </select>
        <div class="errores" *ngIf="form.get('tipo_transaccion')?.touched">
          <small *ngIf="tieneError('tipo_transaccion', 'required')">
            El tipo de transacci贸n es obligatorio.
          </small>
        </div>
      </div>

      <div class="form-group">
        <label>ID Cuenta origen</label>
        <input formControlName="cuenta_origen_id" type="text" />
        <div class="errores" *ngIf="form.get('cuenta_origen_id')?.touched">
          <small *ngIf="tieneError('cuenta_origen_id', 'required')">
            La cuenta de origen es obligatoria.
          </small>
        </div>
      </div>

      <div class="form-group">
        <label>ID Cuenta destino</label>
        <input formControlName="cuenta_destino_id" type="text" />
        <div class="errores" *ngIf="form.get('cuenta_destino_id')?.touched">
          <small *ngIf="tieneError('cuenta_destino_id', 'required')">
            La cuenta destino es obligatoria para transferencias.
          </small>
        </div>
      </div>

      <div class="form-group">
        <label>ID Servicio</label>
        <input formControlName="servicio_id" type="text" />
        <div class="errores" *ngIf="form.get('servicio_id')?.touched">
          <small *ngIf="tieneError('servicio_id', 'required')">
            El servicio es obligatorio para pago de servicios.
          </small>
        </div>
      </div>

      <div class="form-group">
        <label>ID Cajero (opcional)</label>
        <input formControlName="cajero_id" type="text" />
      </div>

      <div class="form-group">
        <label>Monto</label>
        <input formControlName="monto" type="number" step="0.01" />
        <div class="errores" *ngIf="form.get('monto')?.touched">
          <small *ngIf="tieneError('monto', 'required')">
            El monto es obligatorio.
          </small>
          <small *ngIf="tieneError('monto', 'min')">
            Debe ser mayor que cero.
          </small>
        </div>
      </div>

      <div class="form-group">
        <label>Moneda</label>
        <select formControlName="moneda">
          <option *ngFor="let m of monedas" [value]="m">
            {{ m }}
          </option>
        </select>
      </div>

      <div class="form-group full">
        <label>Referencia de pago (factura, etc.)</label>
        <input formControlName="referencia_pago" type="text" />
        <div class="errores" *ngIf="form.get('referencia_pago')?.touched">
          <small *ngIf="tieneError('referencia_pago', 'required')">
            La referencia es obligatoria para pago de servicios.
          </small>
        </div>
      </div>

      <div class="form-group full">
        <label>Descripci贸n</label>
        <input formControlName="descripcion" type="text" />
      </div>
    </div>

    <div class="acciones">
      <button type="button" class="btn-cancelar" (click)="cancelar()">
        Cancelar
      </button>

      <button type="submit" class="btn-guardar" [disabled]="guardando">
        {{ guardando ? 'Guardando...' : 'Registrar' }}
      </button>
    </div>
  </form>
</div>
